---
title: JWT 署名検証入門：デコード ≠ 検証を 5 分で理解
description: '課題: デコード＝検証だと誤解して真正性判断を誤る。得られること: 署名検証の手順・期限系の扱い。'
date: '2025-10-24'
  - 'tool:jwt-decoder'
  - 入門
  - security
audience: Web/API エンジニア
type: primer
tool: jwt-decoder
visibility: primer
robots: index
---

## 1. 導入

「JWT のデコードだけで安全だと思っていた…」「署名検証の手順が分からず期限切れトークンを使ってしまった」そんな悩みはありませんか？
この記事では、JWT の署名検証の基本と、よくある落とし穴・対策を短時間で解説します。
まずは関連ツール「JWT Decoder」で実際に検証してみましょう。

---

## 1. 基本の構造（定義と構文）

JWT は Header・Payload・Signature の 3 部構成です。
署名アルゴリズム（alg）や鍵識別子（kid）、有効期限（exp）、発行時刻（iat）、not before（nbf）が重要です。

| 項目      | ポイント                     |
| --------- | ---------------------------- |
| Header    | アルゴリズム・トークンタイプ |
| Payload   | ユーザー情報・有効期限など   |
| Signature | 署名で改ざん検知             |

---

## 2. 実例（検証手順）

JWT のデコードは誰でもできますが、署名検証は正しい鍵で行う必要があります。
期限切れや未到来のトークンはエラーや警告となるため、leeway 秒の設定も重要です。

---

## 3. 落とし穴（❌ 失敗 →✅ 対策）

- ❌ デコードだけで信頼してしまう
- ✅ 署名検証を必ず行い、alg:none は許可しない
- ❌ 長寿命トークンを発行してしまう
- ✅ 短寿命＋ローテーション、鍵管理を徹底しましょう

---

## 4. 手を動かす（3 手で検証）

1. JWT Decoder の検証タブを開きます
2. 期待アルゴリズムを選択し、鍵やシークレットを入力します
3. exp/nbf/iat のバッジを確認し、期限切れや未到来ならエラー/警告を確認します

---

## 5. クイズ

1. デコードと署名検証の違いは？
2. alg:none が危険な理由は？
3. exp を見落とすと何が起きますか？

### 答え

1. デコードは誰でもできるが、署名検証は正しい鍵が必要
2. 改ざんされたトークンも通ってしまうため
3. 期限切れトークンが使われてしまう

---

## 6. まとめ

- JWT はデコードだけでなく署名検証が必須です
- alg:none は絶対に許可しないようにしましょう
- exp/nbf/iat の期限管理を徹底しましょう
- 鍵管理や短寿命・ローテーションも重要です
- 関連ツール「JWT Decoder」も活用してください

---

まずは「JWT Decoder」で自分のトークンを検証してみましょう。

- Header/Payload/Signature の 3 部構成。`alg` は署名アルゴリズム、`kid` は鍵識別子。
- Payload の `exp`（有効期限）, `nbf`（not before）, `iat`（発行時刻）は検証・運用で重要。

## 3. デコードと検証の違い（最重要）

- デコードは誰でもできる（Base64URL デコード）。検証は正しい鍵（共有鍵/公開鍵/JWKS）で署名の整合を確認する必要がある。
- `exp/nbf/iat` の意味：期限切れ・未到来・時刻の健全性を判断。サーバ側時刻差（clock drift）を考慮して `leeway` を設定する場合がある。

## 4. 手を動かす：/tools/jwt-decoder の Verify

- 検証タブを開き、期待アルゴリズムを選択。
  - HS256: 共有シークレットを入力。
  - RS256: 公開鍵(PEM)を入力。`kid` がある場合は JWKS を有効化して URL を指定。取得した鍵から該当 `kid` を自動選択。
- `exp/nbf/iat` のバッジを確認。期限切れや未到来の場合はエラー/警告。
- `leeway秒` を適切に設定し、境界時刻の誤検知を減らす。

## 5. よくある失敗

- デコードだけで信頼してしまう。`alg:none` を許してしまう。長寿命トークンを発行して漏えい時の被害が長期化。

## 6. セキュリティ運用

- 短寿命＋ローテーション、鍵管理（KMS 等）、HTTPS、XSS 対策（HttpOnly/SameSite/CSP）。
- フロントでは「可視化」。真正性判断は原則サーバで行い、最小限の情報だけをクライアントへ。

## 7. 3 分クイズ

- デコードと検証の違いは？
- なぜ `alg:none` が危険？
- `exp` を見落とすと何が起きる？

## 8. 関連リンク

- RFC 7519 / jwt.io / OIDC 関連資料

> 関連ツール: /tools/jwt-decoder
