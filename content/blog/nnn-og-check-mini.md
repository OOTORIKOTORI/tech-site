---
title: 'OGPチェックの小技'
description: 'OGP画像やタグの即時確認に便利なtipsを紹介。開発中のOGPトラブルを最小限に抑えるための実践メモ。'
published: true
draft: false
date: '2025-10-15'
tags:
  - 'devlog'
canonical: ''
---

プロダクトで「画像が出ない / タイトルが違う」が発生したときに、まず見るべき**最短ルート**をメモしておきます。すべて自サイト内で完結するチェックです。

## 1) サーバ側の生成可否を確認

- **OG 生成 API**（例: `/api/og/hello.png`）が **200 か 302** を返すかを確認します。
  - 例: `curl -I https://migakiexplorer.jp/api/og/hello.png`
  - 200 は生成成功、302 はフォールバック（`/og-default.png` など）。どちらも**リンクプレビューが空白になる状態ではない**ことを確認できます。

## 2) ページの `og:*`/`twitter:*` メタを素早く確認

- ブラウザの「ページのソースを表示」で `og:title` / `og:description` / `og:image` を検索。
- 迷ったら**タイトルと画像**だけまず直す。これで 8 割は解消します。
- `og:image` の URL は **絶対 URL** を推奨。サイズは 1200×630 以上が無難。

## 3) キャッシュの基本

- 配信 CDN のキャッシュを疑う前に、まず**自前の OG チェック**で最新が出ているかを確認。
- 画像 URL の末尾に `?v=timestamp` を付けると**キャッシュ回避**できます（安易な多用は NG）。

## 4) 内部ツール（自サイト）で再確認

- ツール: [/tools/og-check](/tools/og-check)
  - 任意の URL を投げて、現在のタグと画像の状態を即時確認できます。
  - 生成 API のフォールバック理由なども一目でわかります。

---

### よくある落とし穴（チェックリスト）

- [ ] 画像パスが相対 URL になっている
- [ ] `meta` を SPA 側だけで差し替えていて **SSR 時に空**（静的 HTML に出ていない）
- [ ] 画像の MIME / 拡張子が不一致（`.jpg` なのに `image/png` など）
- [ ] ページが `noindex,nofollow` になっている（意図せずブロック）

トラブル時は、まず**1〜4**を順に通せば切り分けが速くなります。
