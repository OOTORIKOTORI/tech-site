---
title: 正規表現入門：パターンで文字列を操る基本
description: '課題: パターンが取り過ぎる/読みにくい。得られること: メタ文字・最短一致の基本と実用パターン。'
date: 2025-10-22T00:00:00.000Z
published: true
audience:
  - 初学者
  - Web エンジニア
tags:
  - 'tool:regex-tester'
  - regex
  - validation
type: primer
tool: regex-tester
visibility: primer
robots: index
---

ログ抽出・入力チェック・置換…**正規表現（Regular Expression）**はテキスト処理の万能ナイフです。
ここでは最低限のルールと、実務でよく使うパターンを紹介します。

---

## 1. 導入：よくある悩み・初心者の疑問

- `.` と `*` の意味が混ざる
- 期待外の場所まで一致してしまう

  「正規表現のパターンが取り過ぎる…」「読みにくい！」そんな悩みはありませんか？
  この記事では、正規表現の基本とよくある落とし穴・対策、実用パターンを短時間で解説します。
  まずは関連ツール「Regex Tester」で自分のパターンを試してみましょう。

  ***

  ## 1. 基本の構造（定義とメタ文字）

  正規表現は、文字列の「パターン」を記述し、それに一致する部分を検索・抽出・置換するための表現方法です。
  代表的なメタ文字やフラグ、エスケープ方法を理解しましょう。

  | メタ文字 | 意味        |
  | -------- | ----------- | --- |
  | .        | 任意 1 文字 |
  | \*       | 0 回以上    |
  | +        | 1 回以上    |
  | ?        | 0/1 回      |
  | []       | 文字クラス  |
  | ()       | グループ    |
  |          |             | OR  |
  | ^        | 行頭        |
  | $        | 行末        |

  ***

  ## 2. 実例（よく使うパターン）

  メール: `^[\w.+-]+@[\w.-]+\.[A-Za-z]{2,}$`
  URL（簡易）: `^https?://[\w.-]+(?:/[\w./-]*)?$`
  日付（YYYY-MM-DD）: `^\d{4}-\d{2}-\d{2}$`
  数字のみ: `^\d+$`

  ***

  ## 3. 落とし穴（❌ 失敗 →✅ 対策）

  - ❌ .\* が貪欲（greedy）で取り過ぎる
  - ✅ .\*? の最短一致を使いましょう
  - ❌ マッチ範囲が広がりすぎる
  - ✅ アンカー^$や境界\b を活用しましょう
  - ❌ 改行に.が一致しない
  - ✅ フラグ s を検討しましょう

  ***

  ## 4. 手を動かす（3 手で検証）

  1. Regex Tester でパターンを入力します
  2. テキストとフラグを設定します
  3. 一致部分を確認し、必要なら修正します

  ***

  ## 5. クイズ

  1. .\*? の意味は？
  2. ^$アンカーの役割は？
  3. 正規表現で改行に一致させるフラグは？

  ### 答え

  1. 最短一致（非貪欲）
  2. 行頭・行末を指定する
  3. s フラグ

  ***

  ## 6. まとめ

  - 正規表現はパターン記述で文字列を自在に操作できます
  - メタ文字やフラグの意味を理解しましょう
  - 貪欲・範囲・改行の落とし穴に注意しましょう
  - 関連ツール「Regex Tester」も活用してください

  ***

  まずは「Regex Tester」で自分のパターンを試してみましょう。

文字列の「パターン」を記述し、それに一致する部分を**検索/抽出/置換**するための表現方法です。

例：`/\d+/` は 1 桁以上の数字に一致します。

---

## 3. 仕組み・構造：メタ文字とエスケープ

- 代表的メタ文字: `.` 任意 1 文字, `*` 0 回以上, `+` 1 回以上, `?` 0/1 回, `[]` 文字クラス, `()` グループ, `|` OR
- アンカー: `^` 行頭, `$` 行末
- フラグ: `i` 大文字小文字無視, `g` 全体検索, `m` 複数行, `s` ドット改行許可
- エスケープ: メタ文字自身を検索するには `\.` のようにバックスラッシュ

---

## 4. よくあるつまずき／勘違い

- 貪欲（greedy）な `.*` が取り過ぎる → `.*?` の最短一致を検討
- マッチ範囲が広がる → アンカー`^$`や境界`\b`を利用
- 改行に`.`が一致しない → フラグ`s`を検討

---

## 5. 実例：よくあるパターン

- メール：`^[\w.+-]+@[\w.-]+\.[A-Za-z]{2,}$`
- URL（簡易）：`^https?://[\w.-]+(?:/[\w./-]*)?$`
- 日付（YYYY-MM-DD）：`^\d{4}-\d{2}-\d{2}$`
- 数字のみ：`^\d+$`

> 注意: これらは簡易版です。実運用では要件に応じて厳密化してください。

---

## 6. セキュリティ・運用上の注意

- ReDoS（正規表現 DoS）に注意：複雑なバックトラッキングを避ける
- ユーザー入力は必ず**タイムアウト**や**長さ制限**を設ける

---

## 7. 手を動かす：関連ツール `/tools/regex-tester` の紹介

- [/tools/regex-tester](/tools/regex-tester) にアクセス
- パターン・フラグ・テキストを入力して一致を確認
- `mark`表示で一致部分を視覚的に把握、キャプチャも配列で確認

---

## 8. 3 分クイズ

- 最短一致の書き方は？ → `*?` `+?`
- 行頭/行末に一致させるには？ → `^` `$`
- 改行も`.`に含めるには？ → フラグ`s`

<details>
<summary>クイズ（3問）</summary>

1. `\b`は何の境界？ → 単語境界
2. 取り過ぎを防ぐには？ → 最短一致や具体的な文字クラス
3. ReDoS 対策は？ → タイムアウト/長さ制限/パターン簡素化

</details>

---

## 9. 関連リンク

- MDN 正規表現: https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Regular_expressions
- 正規表現の安全性（ReDoS）: https://owasp.org/www-community/attacks/Regular_expression_Denial_of_Service_-_ReDoS

> 関連ツール: [/tools/regex-tester](/tools/regex-tester)
