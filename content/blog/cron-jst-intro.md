---
title: CronとJSTの落とし穴入門
date: 2025-09-01
author: site-admin
description: JSTとUTCのズレ・夏時間非対応・曜日と日付条件の優先関係など、運用で詰まりやすいポイントを最速で把握するための入門ガイド。
---

## なぜJSTでcronを検証する必要があるのか

多くのSaaSやCI/CDサービスは内部的にUTCで動いていますが、ビジネス要件はJST（日本時間）で定義されることが多く、**「毎月1日 0:00 JST」** のような表現がそのまま `0 0 1 * *` として投入されます。このとき、夏時間 (DST) が無いという前提に安心しすぎて以下のような見落としが生まれます。

- 実際にはサーバはUTC → フロント表示だけJST換算
- ローカル検証時に `cron` ライブラリがデフォルトタイムゾーンを使用
- CI上のスケジュールはUTC計算で 9時間ズレ

## DOM と DOW の同時指定

cron実装は**ベンダ差異**が発生しやすい領域です。とくに「日 (DOM)」と「曜日 (DOW)」を同時指定した場合に、OR なのか AND なのかは仕様依存です。本サイトのツールではモード切替 (OR / AND) を明示化し、混乱を減らします。

| 例 | ORモード動作 | ANDモード動作 |
|----|--------------|--------------|
| `0 9 1 * 1` | 1日 または 月曜の 09:00 | 1日 かつ 月曜の 09:00 |

## 推奨ワークフロー

1. まずビジネス要件を自然言語で箇条書きにする
2. JST基準で期待する次回実行日時を 3〜5 ケース書き出す
3. ツールに cron 式を入れて結果が一致するか確認
4. CI/クラウド側に設定する際は UTC 換算差異をコメント化

## まとめ

- JST要件でも内部はUTCのことが多い
- DOM/DOW 同時指定は仕様差異を確認
- ツールで目視検証を自動化しヒューマンエラーを減らす
