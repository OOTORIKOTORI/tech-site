diff --git a/layouts/default.vue b/layouts/default.vueindex dcc6675..7c7b24a 100644--- a/layouts/default.vue+++ b/layouts/default.vue@@ -9,9 +9,14 @@ </template>  <script setup lang="ts">+ // Nuxt auto-import resolves components-import { useHead } from '#imports'+import { useHead, useAsyncData } from '#imports'+import { computed } from 'vue'+// queryContent は Nuxt auto-import 依存（明示 import 不可）+import { useRoute } from 'vue-router' +// 既存Organization JSON-LDは維持 const orgJsonLd = {   '@context': 'https://schema.org',   '@type': 'Organization',@@ -20,12 +25,43 @@ const orgJsonLd = {   sameAs: [] } -useHead({-  script: [-    {-      type: 'application/ld+json',-      innerHTML: JSON.stringify(orgJsonLd)-    }+// 記事ページ用BlogPosting JSON-LD+const route = useRoute()++const isBlog = computed(() => route.path.startsWith('/blog/') && !route.path.startsWith('/blog/_'))+const { data: page } = useAsyncData('blogJsonLd', async () => {+  if (!isBlog.value) return null+  // eslint-disable-next-line no-undef+  const qc = typeof queryContent === 'function' ? queryContent : undefined+  if (!qc) return null+  const res = await (qc as (path: string) => { findOne: () => Promise<unknown> })(route.path).findOne()+  return res || null+})+const blogPost = computed(() => {+  if (!isBlog.value || !page.value) return null+  const p = page.value as Record<string, unknown> | null | undefined+  if (!p || typeof p !== 'object' || !('title' in p)) return null+  return {+    '@context': 'https://schema.org',+    '@type': 'BlogPosting',+    headline: typeof p.title === 'string' ? p.title : undefined,+    description: typeof p.description === 'string' ? p.description : undefined,+    image: Array.isArray(p.images) ? p.images : (p.image ? [p.image] : undefined),+    datePublished: p.date ?? p.datePublished,+    dateModified: p.updatedAt ?? p.dateModified ?? p.date,+    author: p.author ? { '@type': 'Person', name: p.author } : undefined,+    mainEntityOfPage: { '@type': 'WebPage', '@id': `https://migakiexplorer.jp${route.path}` },+    publisher: { '@type': 'Organization', name: 'Migaki Explorer', url: 'https://migakiexplorer.jp/' }+  }+})++useHead(() => {+  const scripts = [+    { type: 'application/ld+json', innerHTML: JSON.stringify(orgJsonLd) }   ]+  if (blogPost.value) {+    scripts.push({ type: 'application/ld+json', innerHTML: JSON.stringify(blogPost.value) })+  }+  return { script: scripts } }) </script>diff --git a/nuxt.config.ts b/nuxt.config.tsindex 9afcc1e..66b31d6 100644--- a/nuxt.config.ts+++ b/nuxt.config.ts@@ -62,6 +62,8 @@ export default defineNuxtConfig({         'X-Frame-Options': 'DENY',         'Referrer-Policy': 'no-referrer-when-downgrade',         'Permissions-Policy': 'interest-cohort=()',+        'Content-Security-Policy-Report-Only':+          "default-src 'self'; img-src 'self' data: https:; script-src 'self'; style-src 'self' 'unsafe-inline'; connect-src 'self'; base-uri 'self'; frame-ancestors 'none'",       },     },     '/blog': { prerender: false },diff --git a/public/sitemap.xml b/public/sitemap.xmlindex d326ba3..eb9b0fa 100644--- a/public/sitemap.xml+++ b/public/sitemap.xml@@ -1,2 +1,2 @@ <?xml version="1.0" encoding="UTF-8"?>-<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"><url><loc>https://migakiexplorer.jp/</loc><lastmod>2025-10-09T09:53:53.757Z</lastmod><changefreq>weekly</changefreq><priority>0.7</priority></url><url><loc>https://migakiexplorer.jp/tools/cron-jst</loc><lastmod>2025-10-09T09:53:53.757Z</lastmod><changefreq>weekly</changefreq><priority>0.7</priority></url><url><loc>https://migakiexplorer.jp/tools/jwt-decode</loc><lastmod>2025-10-09T09:53:53.757Z</lastmod><changefreq>weekly</changefreq><priority>0.7</priority></url><url><loc>https://migakiexplorer.jp/blog/blog_og_first_aid</loc><lastmod>2025-10-08T00:00:00.000Z</lastmod><changefreq>weekly</changefreq><priority>0.7</priority></url><url><loc>https://migakiexplorer.jp/blog/welcome</loc><lastmod>2025-10-08T00:00:00.000Z</lastmod><changefreq>weekly</changefreq><priority>0.7</priority></url></urlset>+<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"><url><loc>https://migakiexplorer.jp/</loc><lastmod>2025-10-09T13:26:46.168Z</lastmod><changefreq>weekly</changefreq><priority>0.7</priority></url><url><loc>https://migakiexplorer.jp/tools/cron-jst</loc><lastmod>2025-10-09T13:26:46.168Z</lastmod><changefreq>weekly</changefreq><priority>0.7</priority></url><url><loc>https://migakiexplorer.jp/tools/jwt-decode</loc><lastmod>2025-10-09T13:26:46.168Z</lastmod><changefreq>weekly</changefreq><priority>0.7</priority></url><url><loc>https://migakiexplorer.jp/blog/blog_og_first_aid</loc><lastmod>2025-10-08T00:00:00.000Z</lastmod><changefreq>weekly</changefreq><priority>0.7</priority></url><url><loc>https://migakiexplorer.jp/blog/welcome</loc><lastmod>2025-10-08T00:00:00.000Z</lastmod><changefreq>weekly</changefreq><priority>0.7</priority></url></urlset>